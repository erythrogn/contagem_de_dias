{% extends 'base.html' %}

{% block title %}Início · tamo junto{% endblock %}

{% block styles %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
{% endblock %}

{% block content %}

  <div class="bg-grid" aria-hidden="true">
    <div class="bg-cell"><img src="{{ url_for('static', filename='img/foto1.jpg') }}" alt=""></div>
    <div class="bg-cell"><img src="{{ url_for('static', filename='img/foto3.jpg') }}" alt=""></div>
    <div class="bg-cell"><img src="{{ url_for('static', filename='img/foto4.jpg') }}" alt=""></div>
    <div class="bg-cell"><img src="{{ url_for('static', filename='img/foto2.jpg') }}" alt=""></div>
  </div>
  <div class="bg-vignette" aria-hidden="true"></div>

  <div class="stage">

    <p class="date-label" aria-label="Data de início do relacionamento">
      <span class="date-rune">✦</span> 29 · nov · 2025 <span class="date-rune">✦</span>
    </p>

    <div class="corner-stamp" aria-label="Dias juntos">
      <div class="stamp-box">
        <span class="stamp-top">junto há</span>
        <span class="stamp-num" id="stampDays">00</span>
        <span class="stamp-bot">dias</span>
      </div>
    </div>

    <div class="title-stack">
      <span class="word-tamo">TAMO</span>
      <span class="word-junto">juntos</span>
    </div>

    <div class="ha-line" aria-hidden="true">
      <div class="ha-rule"></div>
      <span class="ha-text">há</span>
      <div class="ha-rule"></div>
    </div>

    <div class="counter" role="timer" aria-live="polite" aria-label="Tempo juntos">
      <div class="c-unit">
        <span class="c-number" id="cDays">00</span>
        <span class="c-label">dias</span>
      </div>
      <div class="c-unit">
        <span class="c-number" id="cHours">00</span>
        <span class="c-label">horas</span>
      </div>
      <div class="c-unit">
        <span class="c-number" id="cMinutes">00</span>
        <span class="c-label">min</span>
      </div>
      <div class="c-unit">
        <span class="c-number" id="cSeconds">00</span>
        <span class="c-label">seg</span>
      </div>
    </div>

    <p class="love-msg">te amo, mozi <span class="love-heart">♥</span></p>

  </div>
{% endblock %}

{% block scripts %}
<script>
  const START = new Date("2025-11-29T00:01:00");

  function pad(n) { return String(n).padStart(2, '0'); }

  function tick() {
    const diff    = Date.now() - START.getTime();
    const days    = Math.floor(diff / 86400000) + 1;
    const hours   = Math.floor((diff % 86400000) / 3600000);
    const minutes = Math.floor((diff % 3600000)  / 60000);
    const seconds = Math.floor((diff % 60000)    / 1000);

    const secEl = document.getElementById('cSeconds');
    const prev  = secEl.textContent;
    const next  = pad(seconds);

    if (prev !== next) {
      secEl.classList.remove('tick');
      void secEl.offsetWidth;
      secEl.classList.add('tick');
    }

    document.getElementById('cDays').textContent    = pad(days);
    document.getElementById('cHours').textContent   = pad(hours);
    document.getElementById('cMinutes').textContent = pad(minutes);
    secEl.textContent                               = next;
    document.getElementById('stampDays').textContent = pad(days);
  }

  tick();
  setInterval(tick, 1000);
</script>
{% endblock %}
